<div>
  <form [formGroup]="form" (ngSubmit)="onSubmit()" (keyup.enter)="onSubmit()">
    <ion-item>
      <ion-input label="Nombre" labelPlacement="start" formControlName="nombre" type="text"></ion-input>
    </ion-item>
  </form>

  
  <div id="popover-button">
    <ion-item [button]="!disable" [detail]="!disable">
      <ion-text slot="start" position="fixed"></ion-text>
      <ion-text *ngIf="!alumnoSelected && !disable">Seleccione un alumno</ion-text>
      <ion-text *ngIf="!alumnoSelected && disable">Ninguno</ion-text>
      <ion-avatar slot="start" *ngIf="alumnoSelected">
        <ion-img *ngIf="alumnoSelected.foto" [src]="alumnoSelected.foto"></ion-img>
        <img *ngIf="!alumnoSelected?.foto" alt="Silhouette" src="https://ionicframework.com/docs/img/demos/avatar.svg"/>
      </ion-avatar>
      <ion-text *ngIf="alumnoSelected">{{alumnoSelected.nombre}}</ion-text>
    </ion-item>
  </div>

  <ion-popover *ngIf="!disable" trigger="popover-button" #popover (willPresent)="onLoadAlumnos()">
    <ng-template>
      <ion-content >
        <ion-list>
          <ion-item>
            <ion-input #search placeholder="Buscar" type="text" (ionInput)="onFilter($event)" debounce="200"></ion-input>
            <ion-button color="medium" slot="end" fill="clear" (click)="clearSearch(search)"><ion-icon slot="icon-only" name="close-outline"></ion-icon></ion-button>
          </ion-item>
          <ion-item button (click)="deselect(popover)">
            <ion-avatar slot="start">
              <img alt="Silhouette of a person's head" src="https://ionicframework.com/docs/img/demos/avatar.svg" />
            </ion-avatar> 
            <ion-text >Ninguno</ion-text>
          </ion-item>
          <app-alumno-item
            (clicked)="onAlumnoClicked(popover,$event)"
            *ngFor="let alumno of alumnos"
            [alumno]="alumno"
          ></app-alumno-item>
        </ion-list>
      </ion-content>
    </ng-template>
  </ion-popover>
  <ion-buttons>
    <ion-button color="primary" fill="clear" (click)="onDelete()">
      <ion-icon slot="icon-only" name="trash-outline"/>
    </ion-button>
    <ion-button type="submit" [disabled]="!form.valid || !form.dirty" class="ion-padding" expand="full" (click)="onSubmit()">Guardar</ion-button>
  </ion-buttons>
</div>
